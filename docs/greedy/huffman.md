# Алгоритм Хаффмана

## Описание задачи

Задача о префиксном кодировании заключается в нахождении оптимального способа кодирования символов, при котором:
1. Ни один код не является префиксом другого (свойство префиксности)
2. Средняя длина кода минимальна

Алгоритм Хаффмана решает эту задачу, присваивая более короткие коды часто встречающимся символам и более длинные - редко встречающимся.

## Алгоритм

### Идея алгоритма

1. Подсчитать частоты появления каждого символа
2. Создать лес из деревьев, каждое из которых содержит один символ
3. Повторять, пока не останется одно дерево:
   - Выбрать два дерева с минимальными частотами
   - Объединить их в новое дерево, добавив новый корень
   - Частота нового дерева = сумма частот поддеревьев

### Псевдокод

```
1. Подсчитать частоты символов
2. Создать приоритетную очередь из деревьев с одним символом
3. Пока в очереди больше одного дерева:
   - Извлечь два дерева с минимальными частотами
   - Создать новое дерево с этими двумя как потомками
   - Добавить новое дерево в очередь
4. Оставшееся дерево - дерево Хаффмана
```

### Доказательство оптимальности

1. Лемма: В оптимальном дереве Хаффмана два символа с наименьшими частотами находятся на максимальной глубине и являются братьями.

2. Доказательство:
   - Предположим, что в оптимальном дереве есть символ с меньшей частотой на меньшей глубине
   - Поменяв местами с символом на большей глубине, получим дерево с меньшей средней длиной кода
   - Противоречие с оптимальностью

3. Индукция:
   - База: для двух символов алгоритм дает оптимальное дерево
   - Шаг: если алгоритм оптимален для n-1 символов, то он оптимален и для n символов

### Сложность

- Время: O(n log n), где n - количество символов
- Память: O(n)

## Пример

```
Исходный текст: "ABRACADABRA"

Частоты символов:
A: 5
B: 2
R: 2
C: 1
D: 1

Построение дерева:
1. C(1) + D(1) = CD(2)
2. B(2) + R(2) = BR(4)
3. CD(2) + BR(4) = CDBR(6)
4. A(5) + CDBR(6) = ACDBR(11)

Коды:
A: 0
B: 100
R: 101
C: 110
D: 111
```

## Применение

1. Сжатие данных (ZIP, GZIP)
2. Кодирование изображений (JPEG)
3. Кодирование аудио (MP3)
4. Передача данных по каналам связи
5. Хранение словарей и индексов

## Преимущества и недостатки

### Преимущества
- Оптимальное префиксное кодирование
- Адаптивность к частотам символов
- Простота реализации
- Эффективность для текстов с неравномерным распределением символов

### Недостатки
- Требуется передача таблицы кодов
- Неэффективен для небольших текстов
- Не учитывает контекст символов
- Может быть неоптимальным для некоторых типов данных 